!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("@svgdotjs/svg.js")):"function"==typeof define&&define.amd?define(["@svgdotjs/svg.js"],i):"object"==typeof exports?exports.PiGraphe=i(require("@svgdotjs/svg.js")):t.PiGraphe=i(t["@svgdotjs/svg.js"])}(window,(function(t){return function(t){var i={};function s(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)s.d(e,r,function(i){return t[i]}.bind(null,r));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([function(i,s){i.exports=t},function(t,i,s){"use strict";s.r(i),s.d(i,"PiGraph",(function(){return o}));var e=s(0);class r{constructor(t,i,s,e){return this._root=t,this._fx=i,this._steps=void 0===e?.025:+e,this._minX=void 0===s?this._root.minX:s[0],this._maxX=void 0===s?this._root.maxX:s[1],this._precision=2,this._tangentShow=!1,this._tangentDX=1e-6,this._shape=t.svg.path().stroke("black").fill("none"),this.plot(),this}_checkFunction(t){try{return"number"!=typeof t(0)?(console.log("Function does not return a number"),this._fx):t}catch{return this._fx}}_evaluate(t,i){return void 0===i&&(i=this._fx),{x:(this._root.origin.x+t)*this._root.ppcm,y:(this._root.origin.y-i(t))*this._root.ppcm}}plot(t,i){void 0!==t&&(this._fx=this._checkFunction(t));let s=[],e="",r="M",h="",o=+this._minX,n=10*this._root.height;for(;o<=this._maxX;){let t=this._evaluate(o);h=""+r,e+=`${"L"===h||"L"===r?r:h}${t.x.toFixed(this._precision)},${Math.abs(t.y)>n?0:t.y.toFixed(this._precision)} `,r=t.y>-100&&t.y<this._root.height+100?"L":"M",s.push([t.x,t.y]),o+=this._steps}return this._shape.array().length===s.length&&0!==i?this._shape.animate(void 0===i?2e3:i).plot(e):(this._shape.clear(),this._shape.plot(e)),this}follow(t){if(void 0!==t&&(this._tangentShow=t),void 0===this._followPoint){this._followPoint=this._root.svg.circle(10).stroke({color:"black",width:.5}).fill("white");let t=this._evaluate(0);this._followPoint.center(t.x,t.y),this._tangent=this._root.svg.line().stroke({color:"black",width:.5}),this._tangentShow||this._tangent.hide()}this._root.svg.on("mousemove",t=>{let i=this._root.svg.node.createSVGPoint();i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(this._root.svg.node.getScreenCTM().inverse());let s=i.x/this._root.width*this._root.dx-this._root.origin.x,e=this._evaluate(s);this._followPoint.center(e.x,e.y),s>=this._minX&&s<=this._maxX?(this._followPoint.show(),this._tangentShow&&(this._tangent.show(),this._tangentPlot(s))):(this._tangent.hide(),this._followPoint.hide())})}_tangentPlot(t){let i=this._evaluate(t),s=this._evaluate(t+this._tangentDX),e=(s.y-i.y)/(s.x-i.x),r=i.y-e*i.x;i.y*s.y<0?this._tangent.plot(i.x,0,i.x,this._root.height):this._tangent.plot(0,r,this._root.width,e*this._root.width+r)}get path(){return this.shape.attr("d")}get shape(){return this._shape}}class h{constructor(t,i,s,r,h,o){this._container="string"==typeof t?document.getElementById(t):t,this._svgWrapper=document.createElement("DIV"),this._svgWrapper.style.position="relative",this._svgWrapper.style.width="100%",this._svgWrapper.style.height="100%",this._container.appendChild(this._svgWrapper),this._dx=+i,this._dy=+s,this._ppcm=100,this._width=this.dx*this._ppcm,this._height=this.dy*this._ppcm,this._draw=Object(e.SVG)().addTo(this._svgWrapper).size("100%","100%"),this._draw.viewbox(0,0,this._width,this._height),this._origin={x:1,y:1},this._createMarker(20),this.showAxis()}_createMarker(t){this._marker={start:null,end:null},this._marker.start=this.svg.marker(t,t,(function(i){i.path(`M1,0 L1,${t}, L${1.2*t},${t/2} L1,0z`).rotate(180)})).ref(0,t/2),this._marker.end=this.svg.marker(t,t,(function(i){i.path(`M1,0 L1,${t}, L${1.2*t},${t/2} L1,0z`)})).ref(t,t/2)}add(t,i,s){return new r(this,t,i,s)}showAxis(){return this.showXAxis(),this.showYAxis(),this}showXAxis(t){return void 0===this._svgXAxis&&(this._svgXAxis=this.svg.line(0,0,0,0).stroke({color:"black",width:1}),this._svgXAxis.marker("end",this._marker.end)),this._svgXAxis.plot((this._origin.x+this.minX+.2)*this._ppcm,this._height-this._origin.y*this._ppcm,(this._origin.x+this.maxX-.2)*this._ppcm,this._height-this._origin.y*this._ppcm),!1===t&&this._svgXAxis.hide(),this}showYAxis(t){return void 0===this._svgYAxis&&(this._svgYAxis=this.svg.line(0,0,0,0).stroke({color:"black",width:1}),this._svgYAxis.marker("end",this._marker.end)),this._svgYAxis.plot(this._origin.x*this._ppcm,this._height-(this._origin.y+this.minY+.2)*this._ppcm,this._origin.x*this._ppcm,this._height-(this._origin.y+this.maxY-.2)*this._ppcm),!1===t&&this._svgYAxis.hide(),this}get svg(){return this._draw}get minX(){return-this._origin.x}get maxX(){return this._dx-this._origin.x}get minY(){return-this._origin.y}get maxY(){return this._dy-this._origin.y}get dx(){return this._dx}get dy(){return this._dy}get ppcm(){return this._ppcm}set ppcm(t){this._ppcm=t}get origin(){return this._origin}set origin(t){this._origin=t,this.showAxis()}get width(){return this._width}get height(){return this._height}}window.PiGraph=h;var o={graph:h}}])}));